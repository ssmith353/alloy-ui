AUI.add("aui-form-validator",function(t){var ar=t.Lang,B=t.Object,P=ar.isBoolean,I=ar.isDate,y=B.isEmpty,u=ar.isFunction,aa=ar.isObject,p=ar.isString,d=ar.trim,X=t.DOM._getRegExp,r="form-validator",G=".",E="",m='button,input:not([type="checkbox"]):not([type="file"]),select,textarea',e='input[type="checkbox"],input[type="file"]',z="input,select,textarea,button",c="Invalid Date",J="|",o="blur",aq="change",O="errorField",ac="input",H="submitError",l="validateField",D="validField",ap="aria-required",al="boundingBox",j="checkbox",h="container",ai="containerErrorClass",T="containerValidClass",R="error",am="errorClass",ao="extractRules",s="field",ag="fieldContainer",Z="fieldStrings",ak="focus",aj="labelCssClass",Y="message",b="messageContainer",Q="name",W="radio",q="rules",ab="selectText",af="showAllMessages",C="showMessages",N="stack",n="stackErrorContainer",a="strings",g="submit",v="type",ae="valid",V="validClass",F="validateOnBlur",U="validateOnInput",k=t.getClassName,an=k(r,R),x=k(r,R,h),i=k(r,ae),ad=k(r,ae,h),K=k(s),f=k(r,Y),w=k(r,N,R),ah='<div class="'+f+'" role="alert"></div>',S='<label class="'+w+'"></label>';YUI.AUI.defaults.FormValidator={STRINGS:{DEFAULT:"Please fix this field.",acceptFiles:"Please enter a value with a valid extension ({0}).",alpha:"Please enter only apha characters.",alphanum:"Please enter only aphanumeric characters.",date:"Please enter a valid date.",digits:"Please enter only digits.",email:"Please enter a valid email address.",equalTo:"Please enter the same value again.",iri:"Please enter a valid IRI.",max:"Please enter a value less than or equal to {0}.",maxLength:"Please enter no more than {0} characters.",min:"Please enter a value greater than or equal to {0}.",minLength:"Please enter at least {0} characters.",number:"Please enter a valid number.",range:"Please enter a value between {0} and {1}.",rangeLength:"Please enter a value between {0} and {1} characters long.",required:"This field is required.",url:"Please enter a valid URL."},REGEX:{alpha:/^[a-z_]+$/i,alphanum:/^\w+$/,digits:/^\d+$/,email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,iri:/^([a-z]([a-z]|\d|\+|-|\.)*):(\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?((\[(|(v[\da-f]{1,}\.(([a-z]|\d|-|\.|_|~)|[!\$&'\(\)\*\+,;=]|:)+))\])|((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=])*)(:\d*)?)(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*|(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)|((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)|((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)){0})(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,number:/^[+\-]?(\d+([.,]\d+)?)+$/,url:/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)*(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i},RULES:{acceptFiles:function(av,au,aw){var at=null;if(p(aw)){var A=aw.replace(/\./g,"").split(/,\s*|\b\s*/);at=X("[.]("+A.join(J)+")$","i");}return at&&at.test(av);},date:function(au,at,av){var A=new Date(au);return(I(A)&&(A!==c)&&!isNaN(A));},equalTo:function(au,at,av){var A=t.one(av);return A&&(d(A.val())===au);},max:function(at,A,au){return(ar.toFloat(at)<=au);},maxLength:function(at,A,au){return(at.length<=au);},min:function(at,A,au){return(ar.toFloat(at)>=au);
},minLength:function(at,A,au){return(at.length>=au);},range:function(au,at,av){var A=ar.toFloat(au);return(A>=av[0])&&(A<=av[1]);},rangeLength:function(au,at,av){var A=au.length;return(A>=av[0])&&(A<=av[1]);},required:function(aw,au,ax){var A=this;if(t.FormValidator.isCheckable(au)){var at=au.get(Q),av=t.all(A.getFieldsByName(at));return(av.filter(":checked").size()>0);}else{return !!aw;}}}};var M=YUI.AUI.defaults.FormValidator;var L=t.Component.create({NAME:r,ATTRS:{boundingBox:{setter:t.one},containerErrorClass:{value:x,validator:p},containerValidClass:{value:ad,validator:p},errorClass:{value:an,validator:p},extractRules:{value:true,validator:P},fieldContainer:{value:G+K},fieldStrings:{value:{},validator:aa},labelCssClass:{validator:p,value:"control-label"},messageContainer:{getter:function(A){return t.Node.create(A).clone();},value:ah},strings:{valueFn:function(){return M.STRINGS;}},rules:{getter:function(at){var A=this;if(!A._rulesAlreadyExtracted){A._extractRulesFromMarkup(at);}return at;},validator:aa,value:{}},selectText:{value:true,validator:P},showMessages:{value:true,validator:P},showAllMessages:{value:false,validator:P},stackErrorContainer:{getter:function(A){return t.Node.create(A).clone();},value:S},validateOnBlur:{value:true,validator:P},validateOnInput:{value:false,validator:P},validClass:{value:i,validator:p}},isCheckable:function(at){var A=at.get(v).toLowerCase();return(A===j||A===W);},EXTENDS:t.Base,prototype:{initializer:function(){var A=this;A._blurHandlers=null;A._fileBlurHandlers=null;A._fileInputHandlers=null;A._inputHandlers=null;A._rulesAlreadyExtracted=false;A._errors={};A._stackErrorContainers={};A.bindUI();A._uiSetValidateOnBlur(A.get(F));A._uiSetValidateOnInput(A.get(U));A._uiSetValidateOnChange(A.get(F)||A.get(U));},bindUI:function(){var A=this,at=A.get(al);var au=at.delegate(ak,function(av){A._setARIARoles();au.detach();},z);A.publish({errorField:{defaultFn:A._defErrorFieldFn},validField:{defaultFn:A._defValidFieldFn},validateField:{defaultFn:A._defValidateFieldFn}});at.on({reset:t.bind(A._onFormReset,A),submit:t.bind(A._onFormSubmit,A)});A.after("extractRulesChange",A._afterExtractRulesChange);A.after("validateOnBlurChange",A._afterValidateOnBlurChange);A.after("validateOnInputChange",A._afterValidateOnInputChange);},addFieldError:function(av,au){var A=this,aw=A._errors,at=av.get(Q);if(!aw[at]){aw[at]=[];}aw[at].push(au);},clearFieldError:function(at){var A=this;delete A._errors[at.get(Q)];},eachRule:function(at){var A=this;t.each(A.get(q),function(au,av){if(u(at)){at.apply(A,[au,av]);}});},findFieldContainer:function(at){var A=this,au=A.get(ag);if(au){return at.ancestor(au);}},focusInvalidField:function(){var A=this,at=A.get(al),au=at.one(G+an);if(au){if(A.get(ab)){au.selectText();}au.focus();}},getField:function(at){var A=this;if(p(at)){at=A.getFieldsByName(at);if(at&&at.length&&!at.name){at=at[0];}}return t.one(at);},getFieldsByName:function(au){var A=this,at=A.get(al).getDOM();return at.elements[au];},getFieldError:function(at){var A=this;return A._errors[at.get(Q)];},getFieldStackErrorContainer:function(av){var A=this,at=av.get(Q),au=A._stackErrorContainers;if(!au[at]){au[at]=A.get(n);}return au[at];},getFieldErrorMessage:function(ax,aw){var ay=this,aA=ax.get(Q),at=ay.get(Z)[aA]||{},A=ay.get(q)[aA],az=ay.get(a),av={};if(aw in A){var au=t.Array(A[aw]);t.each(au,function(aD,aC){av[aC]=[aD].join(E);});}var aB=(at[aw]||az[aw]||az.DEFAULT);return ar.sub(aB,av);},hasErrors:function(){var A=this;return !y(A._errors);},highlight:function(au,at){var A=this,av=A.findFieldContainer(au);A._highlightHelper(au,A.get(am),A.get(V),at);A._highlightHelper(av,A.get(ai),A.get(T),at);},normalizeRuleValue:function(at){var A=this;return u(at)?at.apply(A):at;},unhighlight:function(at){var A=this;A.highlight(at,true);},printStackError:function(au,at,av){var A=this;if(!A.get(af)){av=av.slice(0,1);}at.empty();t.each(av,function(ax,aw){var ay=A.getFieldErrorMessage(au,ax),az=A.get(b).addClass(ax);at.append(az.html(ay));});},resetAllFields:function(){var A=this;A.eachRule(function(au,av){var at=A.getField(av);A.resetField(at);});},resetField:function(au){var A=this,at=A.getFieldStackErrorContainer(au);at.remove();A.resetFieldCss(au);A.clearFieldError(au);},resetFieldCss:function(au){var at=this,av=at.findFieldContainer(au);var A=function(ax,aw){if(ax){t.each(aw,function(ay){ax.removeClass(at.get(ay));});}};A(au,[V,am]);A(av,[T,ai]);},validatable:function(au){var A=this,at=false,aw=A.get(q)[au.get(Q)];if(aw){var av=A.normalizeRuleValue(aw.required);at=(av||(!av&&M.RULES.required.apply(A,[au.val(),au]))||aw.custom);}return !!at;},validate:function(){var A=this;A.eachRule(function(at,au){A.validateField(au);});A.focusInvalidField();},validateField:function(av){var A=this,au=A.getField(av);if(au){var at=A.validatable(au);A.resetField(au);if(at){A.fire(l,{validator:{field:au}});}}},_afterExtractRulesChange:function(at){var A=this;A._uiSetExtractRules(at.newVal);},_afterValidateOnInputChange:function(at){var A=this;A._uiSetValidateOnInput(at.newVal);},_afterValidateOnBlurChange:function(at){var A=this;A._uiSetValidateOnBlur(at.newVal);},_defErrorFieldFn:function(aw){var A=this,au,az,ax,av,ay,at;at=aw.validator;az=at.field;A.highlight(az);if(A.get(C)){ay=az;av=A.getFieldStackErrorContainer(az);ax=az.get("nextSibling");if(ax&&ax.get("nodeType")===3){au=az.ancestor();if(au&&au.hasClass(A.get(aj))){ay=ax;}}ay.placeAfter(av);A.printStackError(az,av,at.errors);}},_defValidFieldFn:function(at){var A=this;var au=at.validator.field;A.unhighlight(au);},_defValidateFieldFn:function(au){var at=this;var av=au.validator.field;var aw=at.get(q)[av.get(Q)];t.each(aw,function(aA,ay){var az=M.RULES[ay];var ax=d(av.val());aA=at.normalizeRuleValue(aA);if(u(az)&&!az.apply(at,[ax,av,aA])){at.addFieldError(av,ay);}});var A=at.getFieldError(av);if(A){at.fire(O,{validator:{field:av,errors:A}});}else{at.fire(D,{validator:{field:av}});}},_highlightHelper:function(av,A,at,au){if(av){if(au){av.removeClass(A).addClass(at);
}else{av.removeClass(at).addClass(A);}}},_extractRulesFromMarkup:function(aH){var aF=this,aA=aF.get(al).getDOM(),at=aA.elements,az=B.keys(M.RULES),aE=az.join("|"),aD=X("aui-field-("+aE+")","g"),ay,av,aI=[],A=function(aK,aJ){aI.push(aJ);};for(ay=0,av=at.length;ay<av;ay++){var au=at[ay],aG=au.name;au.className.replace(aD,A);if(aI.length){var aw=aH[aG],ax,aB;if(!aw){aw={};aH[aG]=aw;}for(ax=0,aB=aI.length;ax<aB;ax++){var aC=aI[ax];if(!(aC in aw)){aw[aC]=true;}}aI.length=0;}}aF._rulesAlreadyExtracted=true;},_onFieldInput:function(at){var A=this;A.validateField(at.target);},_onFormSubmit:function(at){var A=this;var au={validator:{formEvent:at}};A.validate();if(A.hasErrors()){au.validator.errors=A._errors;A.fire(H,au);at.halt();}else{A.fire(g,au);}},_onFormReset:function(at){var A=this;A.resetAllFields();},_setARIARoles:function(){var A=this;A.eachRule(function(au,av){if(au.required){var at=A.getField(av);if(at&&!at.attr(ap)){at.attr(ap,true);}}});},_uiSetExtractRules:function(at){var A=this;if(at){A._extractRulesFromMarkup(A.get(q));}},_uiSetValidateOnInput:function(au){var A=this,at=A.get(al);if(au){if(!A._inputHandlers){A._inputHandlers=at.delegate(ac,A._onFieldInput,m,A);}}else{if(A._inputHandlers){A._inputHandlers.detach();}}},_uiSetValidateOnBlur:function(au){var A=this,at=A.get(al);if(au){if(!A._blurHandlers){A._blurHandlers=at.delegate(o,A._onFieldInput,m,A);}}else{if(A._blurHandlers){A._blurHandlers.detach();}}},_uiSetValidateOnChange:function(au){var A=this,at=A.get("boundingBox");if(au){if(!A._changeHandlers){A._changeHandlers=at.delegate(aq,A._onFieldInput,e,A);}}else{if(A._changeHandlers){A._changeHandlers.detach();}}}}});t.each(M.REGEX,function(at,A){M.RULES[A]=function(av,au,aw){return M.REGEX[A].test(av);};});t.FormValidator=L;},"@VERSION@",{requires:["aui-base","aui-event-input","selector-css3"],skinnable:false});